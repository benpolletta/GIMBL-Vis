function makePlotMarkerPanelControls(pluginObj, parentHandle)
%% makePlotMarkerPanelControls
%
% Input: parentHandle - handle for uicontrol parent

markerDefaultSize = 16;
markerMinSize = 2;
markerMaxSize = 100;

markerTypes = pluginObj.markerTypes;

fontSize = pluginObj.fontSize;

spacing = 2; % px
padding = 2; % px

uiControlsHandles = struct();

vBox = uix.VBox('Parent',parentHandle, 'Spacing',spacing, 'Padding',padding);

% Row 1
row1hBox = uix.HBox('Parent', vBox, 'Spacing', spacing);
makeRow1hBox(row1hBox);


% Row 2
row2hBox = uix.HBox( 'Parent', vBox, 'Spacing', spacing);
makeRow2hBox(row2hBox);

% Set vBox Heights
set(vBox, 'Heights',[-1 -1]);

% Store Handles
% pluginObj.handles.plotMarkerPanel.controls = uiControlsHandles;


%% Nested fn
  function makeRow1hBox(parentHandle)
    % autoSizeToggle
    thisTag = pluginObj.panelTag('autoSizeToggle');
    uiControlsHandles.autoSizeMarkerLabel = uicontrol(...
      'Tag',thisTag,...    
      'Style','togglebutton',...
      'FontUnits','points',...
      'FontSize',fontSize,...
      'String',sprintf('AutoSize (%s)', char(hex2dec('2714'))),...
      'Value',1,...
      'UserData',pluginObj.userData,...
      'Callback',pluginObj.callbackHandle(thisTag),...
      'Parent',parentHandle);
    
    % markerSizeSlider
    thisTag = pluginObj.panelTag('markerSizeSlider');
    uiControlsHandles.markerSizeSlider = uicontrol(...
      'Tag',thisTag,...
      'Style','slider',...
      'FontUnits','points',...
      'FontSize',fontSize,...
      'Min',markerMinSize,...
      'Max',markerMaxSize,...
      'Value',markerDefaultSize,...
      'SliderStep',get(0,'defaultuicontrolSliderStep'),...
      'Enable', 'off',...
      'UserData',pluginObj.userData,...
      'Callback',pluginObj.callbackHandle(thisTag),...
      'Parent',parentHandle);
    
    % Set Box Widths
    set(parentHandle, 'Widths',[-2 -3]);
  end


  function makeRow2hBox(parentHandle)
    
    % markerTypeLabel
    thisTag = pluginObj.panelTag('markerTypeLabel');
    uiControlsHandles.markerTypeLabel = uicontrol(...
      'Tag',thisTag,...
      'Style','text',...    
      'FontUnits','points',...
      'FontSize',fontSize,...
      'String','2D Marker Type:',...
      'Parent',parentHandle);
    
    
    % markerTypeMenu
    markerVal = pluginObj.view.dynamic.markerVal;
    thisTag = pluginObj.panelTag('markerTypeMenu');
    uiControlsHandles.markerTypeMenu = uicontrol(...
      'Tag',thisTag,...
      'Style','popupmenu',...  
      'FontUnits','points',...
      'FontSize',fontSize,...
      'String',markerTypes,...
      'Value',markerVal,...
      'UserData',pluginObj.userData,...
      'Callback',pluginObj.callbackHandle(thisTag),...
      'Parent',parentHandle);
    
    % Set row2hBox Widths
    set(parentHandle, 'Widths',[-2 -3]);
  end

end
